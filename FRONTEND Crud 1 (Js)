document.addEventListener('DOMContentLoaded', function () {
    const userForm = document.getElementById('userForm');
    const usersTable = document.getElementById('usersTable').getElementsByTagName('tbody')[0];
    let users = [];
    let editingUser = null;

    // Função para adicionar ou editar usuário
    userForm.addEventListener('submit', function (e) {
        e.preventDefault();

        const userId = document.getElementById('userId').value;
        const username = document.getElementById('username').value;
        const email = document.getElementById('email').value;

        if (editingUser) {
            // Editar usuário
            editingUser.name = username;
            editingUser.email = email;
            editingUser = null;
        } else {
            // Cadastrar novo usuário
            const newUser = {
                id: Date.now(),
                name: username,
                email: email
            };
            users.push(newUser);
        }

        renderUsers();
        userForm.reset();
    });

    // Função para editar usuário
    function editUser(id) {
        editingUser = users.find(user => user.id === id);
        document.getElementById('userId').value = editingUser.id;
        document.getElementById('username').value = editingUser.name;
        document.getElementById('email').value = editingUser.email;
        document.getElementById('submitBtn').textContent = 'Salvar Alterações';
    }

    // Função para remover usuário
    function deleteUser(id) {
        users = users.filter(user => user.id !== id);
        renderUsers();
    }

    // Função para renderizar a lista de usuários
    function renderUsers() {
        usersTable.innerHTML = '';
        users.forEach(user => {
            const row = usersTable.insertRow();
            row.innerHTML = `
                <td>${user.id}</td>
                <td>${user.name}</td>
                <td>${user.email}</td>
                <td class="actions">
                    <button onclick="editUser(${user.id})">Editar</button>
                    <button onclick="deleteUser(${user.id})">Excluir</button>
                </td>
            `;
        });
    }

    window.editUser = editUser;
    window.deleteUser = deleteUser;
});
